<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/colorful.css">
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/style.css">
    <link rel="shortcut icon" href="/wiki/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/wiki/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>siege - Wiki · Elegancetse Tse</title>
    <meta name="keywords" content="wiki, makrdown, linux, python, ops, simiki"/>
    <meta name="description" content="Stay hungry,Stay foolish."/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
  </head>

  <body>
    <div id="container" class="typo">
      
<div id="header">
  <div id="post-nav">
    <a href="/wiki/">Wiki · Elegancetse Tse</a>
    &nbsp;&#187;&nbsp;
    <a href="/wiki/#tool">tool</a>
    &nbsp;&#187;&nbsp;siege
    <span class="updated">Updated&nbsp;
    2016-09-23 09:10
    </span>
  </div>
</div>
<div class="clearfix"></div>
<div id="content">
  <h2 id="_1">介绍</h2>
<p>linux下siege 网站压力测试机</p>
<h2 id="_2">使用</h2>
<ul>
<li>安装</li>
</ul>
<div class="hlcode"><pre><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">siege</span>
</pre></div>


<ul>
<li>参数说明</li>
</ul>
<div class="hlcode"><pre><span class="o">-</span><span class="n">c</span> <span class="n">NUM</span> <span class="err">设置并发的用户（连接）数量，比如</span><span class="o">-</span><span class="n">c10</span><span class="p">,</span><span class="err">设置并发</span><span class="mi">10</span><span class="err">个连接。默认的连接数量可以到</span><span class="o">~/</span><span class="p">.</span><span class="n">siegerc</span><span class="err">中查看，指令为</span><span class="n">concurrent</span> <span class="o">=</span> <span class="n">x</span><span class="err">，前面咱们已经调整了默认并发连接为</span><span class="mi">50</span><span class="err">。</span>
<span class="o">-</span><span class="n">r</span> <span class="n">NUM</span><span class="p">(</span><span class="n">repetitions</span><span class="p">)</span><span class="err">，重复数量，即每个连接发出的请求数量，设置这个的话，就不需要设置</span><span class="o">-</span><span class="n">t</span><span class="err">了。对应</span><span class="p">.</span><span class="n">siegerc</span><span class="err">配置文件中的</span><span class="n">reps</span> <span class="o">=</span> <span class="n">x</span><span class="err">指令</span>
<span class="o">-</span><span class="n">t</span> <span class="n">NUM</span><span class="p">(</span><span class="n">time</span><span class="p">)</span><span class="err">，持续时间，即测试持续时间，在</span><span class="n">NUM</span><span class="err">时间后结束，单位默认为分，比如</span><span class="o">-</span><span class="n">t10</span><span class="err">，那么测试时间为</span><span class="mi">10</span><span class="err">分钟，</span><span class="o">-</span><span class="n">t10s</span><span class="err">，则测试时间为</span><span class="mi">10</span><span class="err">秒钟。对应</span><span class="p">.</span><span class="n">siegerc</span><span class="err">中的指令为</span><span class="n">time</span> <span class="o">=</span> <span class="n">x</span><span class="err">指令</span>
<span class="o">-</span><span class="n">b</span> <span class="p">(</span><span class="n">benchmark</span><span class="p">),</span><span class="err">基准测试，如果设置这个参数的话，那么</span><span class="n">delay</span><span class="err">时间为</span><span class="mi">0</span><span class="err">。在</span><span class="p">.</span><span class="n">siegerc</span><span class="err">中咱们修改为默认开启。</span>
<span class="o">-</span><span class="n">f</span> <span class="n">url</span><span class="p">.</span><span class="n">txt</span> <span class="p">(</span><span class="n">file</span><span class="p">),</span><span class="err">这是</span><span class="n">url</span><span class="err">列表文件。对应</span><span class="p">.</span><span class="n">siegerc</span><span class="err">配置文件中的</span><span class="n">file</span> <span class="o">=</span> <span class="n">x</span><span class="err">指令</span>
</pre></div>


<ul>
<li>测试结果分析</li>
</ul>
<div class="hlcode"><pre><span class="err">$</span> <span class="n">siege</span> <span class="o">-</span><span class="n">c</span> <span class="mi">500</span> <span class="o">-</span><span class="n">r</span> <span class="mi">50</span> <span class="o">-</span><span class="n">f</span> <span class="n">url</span>
<span class="o">**</span> <span class="n">SIEGE</span> <span class="mf">2.67</span>
<span class="o">**</span> <span class="n">Preparing</span> <span class="mi">500</span> <span class="n">concurrent</span> <span class="n">users</span> <span class="k">for</span> <span class="n">battle</span><span class="p">.</span>
<span class="n">The</span> <span class="n">server</span> <span class="n">is</span> <span class="n">now</span> <span class="n">under</span> <span class="n">siege</span><span class="p">..</span>      <span class="n">done</span><span class="p">.</span>
<span class="nl">Transactions:</span>                  <span class="mi">25000</span> <span class="n">hits</span>           <span class="err">#意思是总共完成了</span><span class="mi">25000</span><span class="err">次测试</span>
<span class="nl">Availability:</span>                 <span class="mf">100.00</span> <span class="o">%</span>              <span class="err">#测试的有效性</span><span class="mi">100</span><span class="o">%</span>
<span class="n">Elapsed</span> <span class="n">time</span><span class="o">:</span>                  <span class="mf">65.52</span> <span class="n">secs</span>           <span class="err">#用时</span><span class="mf">65.52</span><span class="err">秒</span>
<span class="n">Data</span> <span class="n">transferred</span><span class="o">:</span>              <span class="mf">83.65</span> <span class="n">MB</span>             <span class="err">#传输了</span><span class="mf">83.65</span><span class="n">MB</span><span class="err">数据</span>
<span class="n">Response</span> <span class="n">time</span><span class="o">:</span>                  <span class="mf">0.57</span> <span class="n">secs</span>           <span class="err">#响应时间</span>
<span class="n">Transaction</span> <span class="n">rate</span><span class="o">:</span>             <span class="mf">381.56</span> <span class="n">trans</span><span class="o">/</span><span class="n">sec</span>      <span class="err">#每秒传输</span><span class="mf">381.56</span><span class="err">次</span>
<span class="nl">Throughput:</span>                     <span class="mf">1.28</span> <span class="n">MB</span><span class="o">/</span><span class="n">sec</span>         <span class="err">#数据吞吐量每秒</span><span class="mf">1.28</span><span class="n">MB</span>
<span class="nl">Concurrency:</span>                  <span class="mf">216.02</span>                <span class="err">#实际并发访问</span>
<span class="n">Successful</span> <span class="n">transactions</span><span class="o">:</span>       <span class="mi">21707</span>                <span class="err">#成功的传输</span>
<span class="n">Failed</span> <span class="n">transactions</span><span class="o">:</span>               <span class="mi">0</span>                <span class="err">#失败的传输</span>
<span class="n">Longest</span> <span class="n">transaction</span><span class="o">:</span>            <span class="mf">5.83</span>                <span class="err">#每次传输所花最长时间</span>
<span class="n">Shortest</span> <span class="n">transaction</span><span class="o">:</span>           <span class="mf">0.00</span>                <span class="err">#每次传输所花最短时间</span>
</pre></div>


<ul>
<li>使用示例</li>
</ul>
<div class="hlcode"><pre><span class="err">$</span> <span class="n">siege</span> <span class="o">-</span><span class="n">c</span> <span class="mi">20</span> <span class="o">-</span><span class="n">t</span> <span class="mi">10</span> <span class="n">http</span><span class="o">:</span><span class="c1">//www.baidu.com</span>
</pre></div>


<p>过一会百度就把你ip封了。</p>
<h2 id="_3">参考</h2>
<ul>
<li><a href="https://github.com/erasin/notes/blob/master/linux/soft/siege.md">siege 网站压力测试</a></li>
</ul>
  
</div>
    </div>
    <div id="footer">
      <div class="footer-left">
        <p>
        Copyright © 2016 Elegancetse Tse.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
        Theme by <a href="https://git.coding.net/tankywoo/yasimple_x2.git" target="_blank">YASimple_X2</a>.
        </p>
      </div> <!-- end footer-left -->
      <div class="footer-right">
        <p>Site Generated 2016-12-03 14:27:44</p>
      </div> <!-- end footer-right -->
    </div>
  </body>
</html>